# WebSocket만 썼을 때의 한계

1. 서버 간 세션 공유 안됨

WebSocket 세션은 서버 메모리에만 있음. 서버가 여러 대면 다른 사용자에게 브로드캐스트 불가

2. 서버 장애 시 메시지 유실

메시지를 DB나 MQ에 저장하지 않으면 장애 시 복구 어려움

3. 메시지 보장 어려움

특정 사용자에게 전달 실패하면 다시 보내기 힘듦

4. 메시지 처리 로직이 분산되기 어려움

WebSocket 핸들러 하나에 모든 로직이 몰림 (복잡도 ↑)



# 장점

1. 서버 간 브로드캐스트

MQ를 통해 여러 서버가 동일 메시지를 받을 수 있음

2. 장애 대비

MQ는 메시지를 큐에 저장 → 서버가 잠시 죽어도 메시지 유실 없음

3. 비동기 처리

채팅 기록 저장, 욕설 필터링, 푸시 알림 등을 다른 소비자가 분산 처리

4. 마이크로서비스 확장

MQ 덕분에 각 기능을 별도 서비스로 나눌 수 있음

5. 서버 수평 확장 가능

WebSocket 서버를 여러 대 띄워도 MQ로 메시지 전달 동기화 가능
